{"ast":null,"code":"import axios from'axios';import React,{useState}from'react';import{Navigate}from'react-router-dom';import\"./style/signup.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ChangePassword(_ref){let{role}=_ref;const[changed,setChanged]=useState(false);const[inputs,setInputs]=useState({showPassword:false});const[message,setMessage]=useState('');const handleChange=event=>{const{name,value}=event.target;setInputs(values=>({...values,[name]:value}));};const handleClickShowPassword=()=>{setInputs({...inputs,showPassword:!inputs.showPassword});};const handleSubmit=event=>{event.preventDefault();let{old_password,password,confirm_password}=inputs;let endPoint;if(role==='student'){endPoint='student_changepassword';}else if(role==='teacher'){endPoint='teacher_changepassword';}else if(role==='adminstrator'){endPoint='adminstrator_changepassword';}console.log(endPoint);console.log(old_password,password,confirm_password);axios.put(\"/\".concat(endPoint),{old_password,password,confirm_password}).then(res=>res.data).then(data=>{console.log(data);setMessage(data.message);alert(data.message);setChanged(true);}).catch(error=>{if(error.response.status===409){alert(error.response.data.message);console.log(error.response.data.message);setMessage(error.response.data.message);}else if(error.response.status===400){console.log(error.response.data.message);setMessage(error.response.data.message);}else if(error.response.status===401){console.log(error.response.data.message);setMessage(error.response.data.message);}});};return/*#__PURE__*/ (// <div className='Student-login-section'>\n_jsx(\"div\",{className:\"Student-signup-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"selectRole\",children:/*#__PURE__*/_jsx(\"p\",{children:\" Change Password\"})}),/*#__PURE__*/_jsx(\"input\",{// className='input1'\ntype:inputs.showPassword?\"text\":\"password\",name:\"old_password\",value:inputs.old_password||\"\",onChange:handleChange,autoComplete:\"off\",placeholder:\"old password\",required:true,pattern:\"[a-z A-Z 0-9]+\"}),/*#__PURE__*/_jsx(\"input\",{type:inputs.showPassword?\"text\":\"password\",name:\"password\",value:inputs.password||\"\",onChange:handleChange,autoComplete:\"off\",required:true,placeholder:\"new password\"}),/*#__PURE__*/_jsx(\"input\",{type:inputs.showPassword?\"text\":\"password\",name:\"confirm_password\",value:inputs.confirm_password||\"\",onChange:handleChange,autoComplete:\"off\",required:true,placeholder:\"Confirm new password\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',display:'flex',alignItems:'center'},children:/*#__PURE__*/_jsxs(\"span\",{className:\"toggle\",children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:handleClickShowPassword}),\" Show Password\"]})}),/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:message}),role==='student'&&changed===true&&/*#__PURE__*/_jsx(Navigate,{to:\"/student_workspace\",replace:true}),role==='teacher'&&changed===true&&/*#__PURE__*/_jsx(Navigate,{to:\"/teacher_workspace\",replace:true}),role==='adminstrator'&&changed===true&&/*#__PURE__*/_jsx(Navigate,{to:\"/admin_workspace\",replace:true}),/*#__PURE__*/_jsx(\"button\",{children:\"Change\"})]})})// </div>\n);}","map":{"version":3,"names":["axios","React","useState","Navigate","jsx","_jsx","jsxs","_jsxs","ChangePassword","_ref","role","changed","setChanged","inputs","setInputs","showPassword","message","setMessage","handleChange","event","name","value","target","values","handleClickShowPassword","handleSubmit","preventDefault","old_password","password","confirm_password","endPoint","console","log","put","concat","then","res","data","alert","catch","error","response","status","className","children","onSubmit","type","onChange","autoComplete","placeholder","required","pattern","style","width","display","alignItems","onClick","color","to","replace"],"sources":["/home/enam/Desktop/result/frontend/src/pages/changePassword.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport \"./style/signup.css\";\r\n\r\n\r\nexport default function ChangePassword({ role }) {\r\n\r\n    const [changed, setChanged] = useState(false);\r\n\r\n    const [inputs, setInputs] = useState({\r\n        showPassword: false\r\n    });\r\n    const [message, setMessage] = useState('');\r\n\r\n    const handleChange = (event) => {\r\n        const { name, value } = event.target;\r\n        setInputs(values => ({ ...values, [name]: value }))\r\n    }\r\n\r\n    const handleClickShowPassword = () => {\r\n        setInputs({ ...inputs, showPassword: !inputs.showPassword });\r\n    };\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n\r\n        let { old_password, password, confirm_password } = inputs;\r\n        let endPoint;\r\n        if (role === 'student') {\r\n            endPoint = 'student_changepassword';\r\n        }\r\n        else if (role === 'teacher') {\r\n            endPoint = 'teacher_changepassword';\r\n        }\r\n        else if (role === 'adminstrator') {\r\n            endPoint = 'adminstrator_changepassword';\r\n        }\r\n        console.log(endPoint);\r\n        console.log(old_password, password, confirm_password)\r\n        axios.put(`/${endPoint}`, {\r\n            old_password, password, confirm_password\r\n        })\r\n            .then(res => res.data)\r\n            .then(data => {\r\n                console.log(data);\r\n                setMessage(data.message);\r\n                alert(data.message);\r\n                setChanged(true);\r\n            })\r\n            .catch(error => {\r\n                if (error.response.status === 409) {\r\n                    alert(error.response.data.message);\r\n                    console.log(error.response.data.message);\r\n                    setMessage(error.response.data.message);\r\n                }\r\n                else if (error.response.status === 400) {\r\n                    console.log(error.response.data.message);\r\n                    setMessage(error.response.data.message);\r\n                }\r\n                else if (error.response.status === 401) {\r\n                    console.log(error.response.data.message);\r\n                    setMessage(error.response.data.message);\r\n                }\r\n            });\r\n    }\r\n\r\n    return (\r\n        // <div className='Student-login-section'>\r\n\r\n        <div className='Student-signup-container'>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n                <div className='selectRole'>\r\n                    <p> Change Password\r\n                    </p>\r\n                </div>\r\n                <input\r\n                    // className='input1'\r\n                    type={inputs.showPassword ? \"text\" : \"password\"}\r\n                    name='old_password'\r\n                    value={inputs.old_password || \"\"}\r\n                    onChange={handleChange}\r\n                    autoComplete=\"off\"\r\n                    placeholder=\"old password\"\r\n                    required pattern=\"[a-z A-Z 0-9]+\"\r\n                />\r\n                <input\r\n                    type={inputs.showPassword ? \"text\" : \"password\"}\r\n                    name='password'\r\n                    value={inputs.password || \"\"}\r\n                    onChange={handleChange}\r\n                    autoComplete=\"off\"\r\n                    required placeholder=\"new password\"\r\n                />\r\n                <input\r\n                    type={inputs.showPassword ? \"text\" : \"password\"}\r\n                    name='confirm_password'\r\n                    value={inputs.confirm_password || \"\"}\r\n                    onChange={handleChange}\r\n                    autoComplete=\"off\"\r\n                    required placeholder=\"Confirm new password\"\r\n                />\r\n                <div style={{ width: '100%', display: 'flex', alignItems: 'center' }}>\r\n                    <span className='toggle'> <input\r\n                        type=\"checkbox\"\r\n                        onClick={handleClickShowPassword}\r\n                    /> Show Password</span>\r\n                </div>\r\n                <span style={{ color: 'red' }}>{message}</span>\r\n                {(role === 'student' && changed === true) && <Navigate to='/student_workspace' replace />}\r\n                {(role === 'teacher' && changed === true) && <Navigate to='/teacher_workspace' replace />}\r\n                {(role === 'adminstrator' && changed === true) && <Navigate to='/admin_workspace' replace />}\r\n                <button>Change</button>\r\n            </form>\r\n        </div>\r\n\r\n        // </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}